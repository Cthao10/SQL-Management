<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Customers</title>
  <style>
    body { font-family: sans-serif; }
    table { border-collapse: collapse; width: 100%; margin-top: 20px; }
    th, td { border: 1px solid #ccc; padding: 8px; }
    nav a { margin-right: 10px; }
  </style>
  <script>
    function loadCustomers() {
      const table = document.getElementById("customer_table");
      const data = JSON.parse(localStorage.getItem("customers") || "[]");
      table.innerHTML = `
        <tr><th>ID</th><th>First</th><th>Last</th><th>Company</th><th>Country</th>
        <th>City</th><th>Postal</th><th>Phone</th><th>Action</th></tr>`;
      data.forEach((c, i) => {
        table.innerHTML += `
          <tr><td>${c.id}</td><td>${c.first}</td><td>${c.last}</td><td>${c.company}</td>
          <td>${c.country}</td><td>${c.city}</td><td>${c.postal}</td><td>${c.phone}</td>
          <td><button onclick="delCustomer(${i})">Delete</button></td></tr>`;
      });
    }

    function addCustomer() {
      const newCust = {
        id: document.getElementById("id").value,
        first: document.getElementById("first").value,
        last: document.getElementById("last").value,
        company: document.getElementById("company").value,
        country: document.getElementById("country").value,
        city: document.getElementById("city").value,
        postal: document.getElementById("postal").value,
        phone: document.getElementById("phone").value
      };
      const data = JSON.parse(localStorage.getItem("customers") || "[]");
      data.push(newCust);
      localStorage.setItem("customers", JSON.stringify(data));
      loadCustomers();
    }

    function delCustomer(index) {
      const data = JSON.parse(localStorage.getItem("customers") || "[]");
      data.splice(index, 1);
      localStorage.setItem("customers", JSON.stringify(data));
      loadCustomers();
    }

    function searchCustomer() {
      const q = document.getElementById("search").value.toLowerCase();
      const rows = document.querySelectorAll("#customer_table tr:not(:first-child)");
      rows.forEach(row => {
        row.style.display = [...row.cells].some(td =>
          td.textContent.toLowerCase().includes(q)) ? "" : "none";
      });
    }

    window.onload = loadCustomers;
  </script>
</head>
<body>
  <nav>
    <a href="dashboard.html">Dashboard</a>
    <a href="customers.html">Customers</a>
    <a href="employee.html">Employee</a>
    <a href="product.html">Product</a>
    <a href="orders.html">Orders</a>
  </nav>

  <h1>Customers</h1>
  <form onsubmit="event.preventDefault(); addCustomer();">
    <label>ID: <input type="text" id="id" required></label><br>
    <label>First Name: <input type="text" id="first" required></label><br>
    <label>Last Name: <input type="text" id="last" required></label><br>
    <label>Company: <input type="text" id="company" required></label><br>
    <label>Country: <input type="text" id="country" required></label><br>
    <label>City: <input type="text" id="city" required></label><br>
    <label>Postal Code: <input type="text" id="postal" required></label><br>
    <label>Phone: <input type="text" id="phone" required></label><br>
    <button type="submit">Submit</button><br><br>
    <label>Search All Records: <input type="text" id="search" oninput="searchCustomer()" placeholder="Search by any field..."></label>
  </form>

  <table id="customer_table"></table>
</body>
</html>
