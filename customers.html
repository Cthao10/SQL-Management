<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Customers</title>
  <style>
    table { border-collapse: collapse; width: 100%; }
    th, td { border: 1px solid #999; padding: 6px; text-align: left; }
    button { margin: 2px; }
    nav a { margin-right: 10px; }
  </style>
  <script>
    function loadCustomers() {
      const table = document.getElementById("customer_table");
      const data = JSON.parse(localStorage.getItem("customers") || "[]");
      table.innerHTML = `<tr>
        <th>Customer ID</th><th>First Name</th><th>Last Name</th><th>Company</th><th>Country</th><th>City</th><th>Postal Code</th><th>Phone</th><th>Actions</th>
      </tr>`;
      data.forEach((cust, index) => {
        const row = table.insertRow();
        row.innerHTML = `
          <td>${cust.customer_id}</td>
          <td>${cust.first_name}</td>
          <td>${cust.last_name}</td>
          <td>${cust.company_name}</td>
          <td>${cust.country}</td>
          <td>${cust.city}</td>
          <td>${cust.postal_code}</td>
          <td>${cust.phone_number}</td>
          <td><button onclick="deleteCustomer(${index})">Delete</button></td>`;
      });
    }

    function addCustomer() {
      const newCust = {
        customer_id: document.getElementById("customer_id").value.trim(),
        first_name: document.getElementById("first_name").value.trim(),
        last_name: document.getElementById("last_name").value.trim(),
        company_name: document.getElementById("company_name").value.trim(),
        country: document.getElementById("country").value.trim(),
        city: document.getElementById("city").value.trim(),
        postal_code: document.getElementById("postal_code").value.trim(),
        phone_number: document.getElementById("phone_number").value.trim()
      };

      if (!newCust.customer_id || !newCust.first_name || !newCust.last_name) {
        alert("Please fill in required fields.");
        return;
      }

      const customers = JSON.parse(localStorage.getItem("customers") || "[]");
      customers.push(newCust);
      localStorage.setItem("customers", JSON.stringify(customers));

      document.getElementById("customer_form").reset();
      loadCustomers();
    }

    function deleteCustomer(index) {
      const customers = JSON.parse(localStorage.getItem("customers") || "[]");
      customers.splice(index, 1);
      localStorage.setItem("customers", JSON.stringify(customers));
      loadCustomers();
    }

    function searchCustomer() {
      const query = document.getElementById("search_input").value.toLowerCase();
      const table = document.getElementById("customer_table");
      const rows = table.getElementsByTagName("tr");

      for (let i = 1; i < rows.length; i++) {
        const cells = rows[i].getElementsByTagName("td");
        let found = false;
        for (let j = 0; j < cells.length - 1; j++) { // exclude actions
          if (cells[j].textContent.toLowerCase().includes(query)) {
            found = true;
            break;
          }
        }
        rows[i].style.display = found ? "" : "none";
      }
    }

    window.onload = loadCustomers;
  </script>
</head>
<body>
  <nav>
    <a href="dashboard.html">Dashboard</a>
    <a href="customers.html">Customers</a>
    <a href="employee.html">Employee</a>
    <a href="product.html">Product</a>
    <a href="orders.html">Orders</a>
  </nav>

  <h1>Customers</h1>

  <form id="customer_form" onsubmit="event.preventDefault(); addCustomer();">
    <label>Customer ID: <input type="text" id="customer_id" required></label><br>
    <label>First Name: <input type="text" id="first_name" required></label><br>
    <label>Last Name: <input type="text" id="last_name" required></label><br>
    <label>Company Name: <input type="text" id="company_name"></label><br>
    <label>Country: <input type="text" id="country"></label><br>
    <label>City: <input type="text" id="city"></label><br>
    <label>Postal Code: <input type="text" id="postal_code"></label><br>
    <label>Phone Number: <input type="text" id="phone_number"></label><br>
    <button type="submit">Submit</button>
  </form>

  <div style="margin-top: 10px;">
    <input type="text" id="search_input" placeholder="Search Customers..." />
    <button type="button" onclick="searchCustomer()">Search</button>
  </div>

  <h2>Saved Customers</h2>
  <table id="customer_table"></table>
</body>
</html>
