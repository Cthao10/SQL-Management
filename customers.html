<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Customers</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    form > div { margin-bottom: 8px; }
    table, th, td { border: 1px solid #ddd; border-collapse: collapse; padding: 5px; }
    th { background-color: #f0f0f0; }
    .entry { margin-top: 10px; }
    button { cursor: pointer; }
    nav ul { list-style: none; display: flex; gap: 10px; padding: 0; }
    nav a { text-decoration: none; color: #fff; font-weight: bold; }
    #logoutBtn { margin-left: auto; }
    nav { background: #333; padding: 10px; display: flex; align-items: center; }
  </style>
</head>
<body>

<nav>
  <ul style="display: flex; gap: 15px; margin: 0; padding: 0;">
    <li><a href="customers.html">Customers</a></li>
    <li><a href="product.html">Products</a></li>
    <li><a href="employee.html">Employees</a></li>
    <li><a href="orders.html">Orders</a></li>
  </ul>
  <button id="logoutBtn" onclick="logout()" style="margin-left:auto;">Logout</button>
</nav>

<h1>Customers</h1>

<form id="customerForm">
  <div><label>First Name: <input type="text" id="firstName" required></label></div>
  <div><label>Last Name: <input type="text" id="lastName" required></label></div>
  <div><label>Address: <input type="text" id="address"></label></div>
  <div><label>City: <input type="text" id="city"></label></div>
  <div><label>State: <input type="text" id="state"></label></div>
  <div><label>Phone: <input type="text" id="phone"></label></div>
  <div><label>Email: <input type="email" id="email"></label></div>
  <button type="submit">Add Customer</button>
</form>

<div style="margin-top: 10px;">
  <input type="text" id="searchInput" placeholder="Search customers..." style="width: 300px; padding:5px;" onkeydown="return event.key !== 'Enter';">
</div>

<div id="entries" class="entry"></div>

<script>
const currentUser = localStorage.getItem('currentUser') || 'default_user';
if (!currentUser) window.location.href = 'login.html';

const inputs = [
  'firstName', 'lastName', 'address', 'city', 'state',
  'phone', 'email'
];

const form = document.getElementById('customerForm');
const entriesDiv = document.getElementById('entries');
const searchInput = document.getElementById('searchInput');

let customers = JSON.parse(localStorage.getItem(currentUser + '_customers') || 'null');
if (!customers) {
  customers = [
    // Unique customers
    { firstName: "Liam", lastName: "Nguyen", address: "123 Main St", city: "Dallas", state: "TX", phone: "214-555-0123", email: "liam@example.com" },
    { firstName: "Emma", lastName: "Williams", address: "456 Oak Rd", city: "Austin", state: "TX", phone: "512-555-0456", email: "emma@example.com" },
    { firstName: "Noah", lastName: "Kim", address: "789 Pine Dr", city: "Seattle", state: "WA", phone: "206-555-0789", email: "noah@example.com" },
    { firstName: "Olivia", lastName: "Smith", address: "321 Cedar Ln", city: "San Diego", state: "CA", phone: "858-555-0033", email: "olivia@example.com" },
    { firstName: "Ethan", lastName: "Brown", address: "654 Maple St", city: "Denver", state: "CO", phone: "303-555-0666", email: "ethan@example.com" },
    { firstName: "Sophia", lastName: "Lee", address: "100 Market St", city: "San Francisco", state: "CA", phone: "415-555-1234", email: "sophia@example.com" },
    { firstName: "James", lastName: "Garcia", address: "200 Ocean Ave", city: "Miami", state: "FL", phone: "305-555-5678", email: "james@example.com" },
    { firstName: "Isabella", lastName: "Martinez", address: "300 Lakeview Dr", city: "Orlando", state: "FL", phone: "407-555-9876", email: "isabella@example.com" },
    { firstName: "Benjamin", lastName: "Clark", address: "400 River Rd", city: "Minneapolis", state: "MN", phone: "612-555-1122", email: "ben@example.com" },
    { firstName: "Mia", lastName: "Hernandez", address: "500 Hilltop Blvd", city: "Phoenix", state: "AZ", phone: "480-555-3344", email: "mia@example.com" },
    { firstName: "Lucas", lastName: "Lopez", address: "600 Valley Rd", city: "Las Vegas", state: "NV", phone: "702-555-4455", email: "lucas@example.com" },
    { firstName: "Amelia", lastName: "Gonzalez", address: "700 Summit Ave", city: "Salt Lake City", state: "UT", phone: "801-555-7788", email: "amelia@example.com" },
    { firstName: "Henry", lastName: "Hall", address: "800 Forest St", city: "Portland", state: "OR", phone: "503-555-2211", email: "henry@example.com" },
    { firstName: "Evelyn", lastName: "Allen", address: "900 Ridge Rd", city: "Boise", state: "ID", phone: "208-555-8899", email: "evelyn@example.com" },
    { firstName: "Alexander", lastName: "Young", address: "101 North Ave", city: "Chicago", state: "IL", phone: "312-555-9988", email: "alex@example.com" },
    { firstName: "Charlotte", lastName: "King", address: "202 West St", city: "Detroit", state: "MI", phone: "313-555-6677", email: "charlotte@example.com" },
    { firstName: "William", lastName: "Wright", address: "303 South Blvd", city: "Indianapolis", state: "IN", phone: "317-555-4433", email: "will@example.com" },
    { firstName: "Ava", lastName: "Scott", address: "404 East Rd", city: "Columbus", state: "OH", phone: "614-555-3355", email: "ava@example.com" },
    { firstName: "Daniel", lastName: "Green", address: "505 Maple St", city: "Nashville", state: "TN", phone: "615-555-7788", email: "daniel@example.com" },
    { firstName: "Harper", lastName: "Adams", address: "606 Elm St", city: "Louisville", state: "KY", phone: "502-555-9922", email: "harper@example.com" },
    { firstName: "Michael", lastName: "Baker", address: "707 Birch St", city: "Atlanta", state: "GA", phone: "404-555-5566", email: "michael@example.com" },
    { firstName: "Ella", lastName: "Nelson", address: "808 Spruce Ave", city: "Raleigh", state: "NC", phone: "919-555-2244", email: "ella@example.com" },
    { firstName: "Jackson", lastName: "Carter", address: "909 Cedar Ave", city: "Charleston", state: "SC", phone: "843-555-7755", email: "jackson@example.com" },
    { firstName: "Abigail", lastName: "Mitchell", address: "110 Poplar St", city: "Richmond", state: "VA", phone: "804-555-1234", email: "abigail@example.com" },
    { firstName: "Sebastian", lastName: "Perez", address: "220 Willow Rd", city: "Baltimore", state: "MD", phone: "410-555-7890", email: "sebastian@example.com" },
    { firstName: "Emily", lastName: "Roberts", address: "330 Pine Ln", city: "Philadelphia", state: "PA", phone: "215-555-8888", email: "emily@example.com" },
    { firstName: "Logan", lastName: "Turner", address: "440 Aspen Dr", city: "Newark", state: "NJ", phone: "973-555-4466", email: "logan@example.com" },
    { firstName: "Grace", lastName: "Phillips", address: "550 Fir Ct", city: "New Haven", state: "CT", phone: "203-555-1122", email: "grace@example.com" },
    { firstName: "David", lastName: "Campbell", address: "660 Redwood Blvd", city: "Boston", state: "MA", phone: "617-555-9876", email: "david@example.com" },
    { firstName: "Scarlett", lastName: "Parker", address: "770 Sycamore St", city: "Providence", state: "RI", phone: "401-555-2233", email: "scarlett@example.com" },
    { firstName: "Joseph", lastName: "Evans", address: "880 Dogwood Dr", city: "Albany", state: "NY", phone: "518-555-6644", email: "joe@example.com" },
    { firstName: "Aria", lastName: "Edwards", address: "990 Chestnut Ln", city: "Buffalo", state: "NY", phone: "716-555-4455", email: "aria@example.com" },
    { firstName: "Matthew", lastName: "Collins", address: "111 Laurel St", city: "Pittsburgh", state: "PA", phone: "412-555-3344", email: "matt@example.com" },
    { firstName: "Victoria", lastName: "Stewart", address: "222 Hawthorn Dr", city: "Cleveland", state: "OH", phone: "216-555-8899", email: "victoria@example.com" },
    { firstName: "Samuel", lastName: "Morris", address: "333 Oak Cir", city: "Milwaukee", state: "WI", phone: "414-555-7766", email: "samuel@example.com" },
    { firstName: "Luna", lastName: "Rogers", address: "444 Hickory Rd", city: "Des Moines", state: "IA", phone: "515-555-1123", email: "luna@example.com" },
    { firstName: "Owen", lastName: "Reed", address: "555 Ash Ave", city: "Omaha", state: "NE", phone: "402-555-5567", email: "owen@example.com" },
    { firstName: "Chloe", lastName: "Cook", address: "666 Beech Blvd", city: "Fargo", state: "ND", phone: "701-555-7765", email: "chloe@example.com" },
    { firstName: "Wyatt", lastName: "Morgan", address: "777 Larch Rd", city: "Billings", state: "MT", phone: "406-555-9933", email: "wyatt@example.com" },
    { firstName: "Zoey", lastName: "Bell", address: "888 Aspen St", city: "Anchorage", state: "AK", phone: "907-555-2255", email: "zoey@example.com" },
    { firstName: "Jack", lastName: "Murphy", address: "999 Tamarack Dr", city: "Honolulu", state: "HI", phone: "808-555-5588", email: "jack@example.com" },
    { firstName: "Lily", lastName: "Bailey", address: "123 Fir Ln", city: "Burlington", state: "VT", phone: "802-555-3345", email: "lily@example.com" },
    { firstName: "Elijah", lastName: "Rivera", address: "234 Redwood Ct", city: "Manchester", state: "NH", phone: "603-555-6677", email: "elijah@example.com" },
    { firstName: "Hannah", lastName: "Cooper", address: "345 Dogwood Cir", city: "Portland", state: "ME", phone: "207-555-8899", email: "hannah@example.com" },
    { firstName: "Aiden", lastName: "Richardson", address: "456 Spruce Dr", city: "Bozeman", state: "MT", phone: "406-555-1122", email: "aiden@example.com" },
    { firstName: "Layla", lastName: "Cox", address: "567 Chestnut Blvd", city: "Cheyenne", state: "WY", phone: "307-555-3377", email: "layla@example.com" },
    { firstName: "Gabriel", lastName: "Ward", address: "678 Laurel Ln", city: "Lincoln", state: "NE", phone: "402-555-7788", email: "gabriel@example.com" },
    { firstName: "Zoe", lastName: "Foster", address: "789 Hickory St", city: "Sioux Falls", state: "SD", phone: "605-555-9988", email: "zoe@example.com" },
    { firstName: "Julian", lastName: "Gray", address: "890 Pine St", city: "Bismarck", state: "ND", phone: "701-555-6655", email: "julian@example.com" },
    { firstName: "Nora", lastName: "James", address: "901 Elm St", city: "Little Rock", state: "AR", phone: "501-555-2233", email: "nora@example.com" },

    // Repeated last names to match orders.html
    { firstName: "Mia", lastName: "Williams", address: "100 Hill St", city: "Dallas", state: "TX", phone: "214-555-1234", email: "mia.williams@example.com" },
    { firstName: "Lucas", lastName: "Garcia", address: "200 Ocean Blvd", city: "Miami", state: "FL", phone: "305-555-6789", email: "lucas.garcia@example.com" },
    { firstName: "Amelia", lastName: "Smith", address: "300 Lake St", city: "San Diego", state: "CA", phone: "858-555-7788", email: "amelia.smith@example.com" },
    { firstName: "Henry", lastName: "Lee", address: "400 Forest Ave", city: "Portland", state: "OR", phone: "503-555-3344", email: "henry.lee@example.com" },
    { firstName: "Evelyn", lastName: "Brown", address: "500 Ridge Rd", city: "Boise", state: "ID", phone: "208-555-8890", email: "evelyn.brown@example.com" },
    { firstName: "Alexander", lastName: "Clark", address: "600 North St", city: "Minneapolis", state: "MN", phone: "612-555-4455", email: "alex.clark@example.com" }
  ];
  localStorage.setItem(currentUser + '_customers', JSON.stringify(customers));
}

function saveCustomers() {
  localStorage.setItem(currentUser + '_customers', JSON.stringify(customers));
}

function clearInputs() {
  inputs.forEach(id => {
    const el = document.getElementById(id);
    if (el) el.value = '';
  });
}

function renderList(filter = '') {
  const filtered = customers.filter(c => {
    return Object.values(c).some(val =>
      String(val).toLowerCase().includes(filter.toLowerCase())
    );
  });

  if (filtered.length === 0) {
    entriesDiv.innerHTML = '<p>No customers found.</p>';
    return;
  }

  let html = '<table><thead><tr>';
  inputs.forEach(id => {
    html += `<th>${id.charAt(0).toUpperCase() + id.slice(1)}</th>`;
  });
  html += '<th>Actions</th></tr></thead><tbody>';

  filtered.forEach((cust, i) => {
    html += '<tr>';
    inputs.forEach(id => {
      html += `<td>${cust[id] || ''}</td>`;
    });
    html += `<td><button onclick="deleteCustomer(${i})">Delete</button></td></tr>`;
  });

  html += '</tbody></table>';
  entriesDiv.innerHTML = html;
}

function deleteCustomer(index) {
  customers.splice(index, 1);
  saveCustomers();
  renderList(searchInput.value);
}

form.addEventListener('submit', e => {
  e.preventDefault();
  const newCustomer = {};
  let valid = true;
  inputs.forEach(id => {
    const val = document.getElementById(id).value.trim();
    if ((id === 'firstName' || id === 'lastName') && val === '') valid = false;
    newCustomer[id] = val;
  });

  if (!valid) {
    alert('First and Last Name are required.');
    return;
  }

  customers.push(newCustomer);
  saveCustomers();
  renderList();
  clearInputs();
});

searchInput.addEventListener('input', e => {
  renderList(e.target.value);
});

function logout() {
  localStorage.removeItem('currentUser');
  window.location.href = 'login.html';
}

renderList();
</script>

</body>
</html>
