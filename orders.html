<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Orders</title>
  <style>
    table { border-collapse: collapse; width: 100%; }
    th, td { border: 1px solid #999; padding: 8px; }
    nav a { margin-right: 10px; }
  </style>
  <script>
    function load() {
      const table = document.getElementById("orders_table");
      const data = JSON.parse(localStorage.getItem("orders") || "[]");
      table.innerHTML = `<tr><th>Order ID</th><th>Customer</th><th>Item</th><th>Qty</th><th>Status</th><th>Date</th><th>Invoice</th><th>Action</th></tr>`;
      data.forEach((o, i) => {
        table.innerHTML += `<tr>
          <td>${o.order_id}</td>
          <td>${o.customer}</td>
          <td>${o.item}</td>
          <td>${o.qty}</td>
          <td>${o.status}</td>
          <td>${o.date}</td>
          <td>Payment: ${o.payment}<br>Price: $${o.price}<br>Tax: $${o.tax}<br>Ship: $${o.ship}</td>
          <td>
            <button onclick="viewDetail(${i})">View</button>
            <button onclick="del(${i})">Delete</button>
          </td>
        </tr>`;
      });
    }

    function add() {
      const o = {
        order_id: order_id.value,
        customer: customer.value,
        item: item.value,
        qty: qty.value,
        status: status.value,
        date: date.value,
        payment: payment.value,
        price: price.value,
        tax: tax.value,
        ship: ship.value
      };
      const all = JSON.parse(localStorage.getItem("orders") || "[]");
      all.push(o);
      localStorage.setItem("orders", JSON.stringify(all));
      load();
    }

    function del(i) {
      const all = JSON.parse(localStorage.getItem("orders") || "[]");
      all.splice(i, 1);
      localStorage.setItem("orders", JSON.stringify(all));
      load();
    }

    function viewDetail(i) {
      const o = JSON.parse(localStorage.getItem("orders"))[i];
      alert(`Order ID: ${o.order_id}
Customer: ${o.customer}
Item: ${o.item}
Qty: ${o.qty}
Status: ${o.status}
Date: ${o.date}
Payment: ${o.payment}
Price: $${o.price}
Tax: $${o.tax}
Shipping: $${o.ship}`);
    }

    function search() {
      const q = search_input.value.toLowerCase();
      document.querySelectorAll("#orders_table tr:not(:first-child)").forEach(row => {
        row.style.display = [...row.cells].some(td => td.textContent.toLowerCase().includes(q)) ? "" : "none";
      });
    }

    window.onload = load;
  </script>
</head>
<body>
  <nav>
    <a href="dashboard.html">Dashboard</a>
    <a href="customers.html">Customers</a>
    <a href="employee.html">Employee</a>
    <a href="product.html">Product</a>
    <a href="orders.html">Orders</a>
  </nav>

  <h1>Orders</h1>
  <form onsubmit="event.preventDefault(); add();">
    <label>Order ID: <input type="text" id="order_id" required></label><br>
    <label>Customer: <input type="text" id="customer" required></label><br>
    <label>Item: <input type="text" id="item" required></label><br>
    <label>Qty: <input type="number" id="qty" required></label><br>
    <label>Status: 
      <select id="status">
        <option>Pending</option>
        <option>Shipped</option>
        <option>Delivered</option>
        <option>Cancelled</option>
      </select>
    </label><br>
    <label>Date: <input type="date" id="date" required></label><br>
    <label>Payment Method: <input type="text" id="payment" required></label><br>
    <label>Price: <input type="number" id="price" required></label><br>
    <label>Tax: <input type="number" id="tax" required></label><br>
    <label>Shipping: <input type="number" id="ship" required></label><br>
    <button type="submit">Submit</button><br><br>
    <label>Search: <input type="text" id="search_input" oninput="search()" placeholder="Search..."></label>
  </form>
  <table id="orders_table"></table>
</body>
</html>
