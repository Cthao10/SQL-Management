<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Orders</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    form > div { margin-bottom: 8px; }
    table { width:100%; border-collapse: collapse; margin-top:10px; }
    th, td { border:1px solid #ddd; padding:8px; }
    th { background:#f0f0f0; }
    nav ul { list-style:none; display:flex; gap:10px; padding:0; }
    nav a { text-decoration:none; color:#333; }
    #logoutBtn { float: right; }
    .order-entry { border:1px solid #ccc; padding:10px; margin-bottom:10px; }
    .order-buttons button { margin-right:10px; margin-top:5px; }
    .inline { display:inline-block; margin-right:10px; }
  </style>
</head>
<body>

<nav style="display: flex; justify-content: space-between; align-items: center; background: #333; padding: 10px;">
  <ul style="list-style: none; display: flex; gap: 15px; margin: 0; padding: 0;">
    <li><a href="customers.html" style="color:white; text-decoration:none;">Customers</a></li>
    <li><a href="product.html" style="color:white; text-decoration:none;">Products</a></li>
    <li><a href="employee.html" style="color:white; text-decoration:none;">Employees</a></li>
    <li><a href="orders.html" style="color:white; text-decoration:none;">Orders</a></li>
  </ul>
  <button id="logoutBtn" onclick="logout()" style="padding: 6px 10px; cursor: pointer;">Logout</button>
</nav>
<hr>

<h1>Orders</h1>

<form id="orderForm">
  <div><label>Order ID: <input type="text" id="orderId" required></label></div>
  <div><label>Order Date: <input type="date" id="orderDate" required></label></div>
  <div><label>Item Status:
    <select id="itemStatus" required>
      <option value="">--</option>
      <option value="pending">Pending</option>
      <option value="shipped">Shipped</option>
      <option value="delivered">Delivered</option>
      <option value="cancelled">Cancelled</option>
    </select>
  </label></div>
  <div><label>Product Name: <input type="text" id="productName" required></label></div>
  <div><label>Product Id: <input type="text" id="productId"></label></div>
  <div><label>Product Lot: <input type="text" id="productLot"></label></div>
  <div><label>Product Location: <input type="text" id="productLocation" required></label></div>
  <div><label>Quantity (kg): <input type="number" id="quantity" required></label></div>
  <div><label>Employee Id: <input type="text" id="employeeId" required></label></div>
  <div><label>Customer Name: <input type="text" id="customerName" required></label></div>
  <div><label>Destination: <input type="text" id="destination" required></label></div>
  <div><label>Price ($): <input type="number" id="price" step="0.01" required></label></div>

  <button type="submit">Add Order</button>
</form>

<div style="margin-top:10px">
  <input type="text" id="searchInput" placeholder="Search orders..." style="width:300px;padding:5px;" onkeydown="return event.key !== 'Enter';">
</div>

<div id="orderList"></div>

<script>
  const currentUser = localStorage.getItem('currentUser');
  if (!currentUser) window.location.href='login.html';

  // List of input fields for persistence & form processing
  const inputs = [
    'orderId', 'orderDate', 'itemStatus', 'productName', 'productId',
    'productLot', 'productLocation', 'quantity', 'employeeId', 'customerName',
    'destination', 'price'
  ];

  // Load form input values from localStorage for current user
  inputs.forEach(id => {
    const el = document.getElementById(id);
    if(el) {
      el.value = localStorage.getItem(currentUser + '_order_' + id) || '';
      el.addEventListener('input', () => {
        localStorage.setItem(currentUser + '_order_' + id, el.value);
      });
    }
  });

  const form = document.getElementById('orderForm');
  const orderList = document.getElementById('orderList');
  const searchInput = document.getElementById('searchInput');

  // Sample 50 orders matching the customers and your product specs
  const sampleOrders = [
    { orderId: '100001', orderDate: '2025-06-01', itemStatus: 'pending', productName: 'GDL', productId: '100001', productLot: '500001', productLocation: 'Warehouse A', quantity: 150, employeeId: 'E001', customerName: 'James Smith', destination: 'New York', price: 1200.00 },
    { orderId: '100002', orderDate: '2025-06-02', itemStatus: 'shipped', productName: 'OCTA', productId: '200001', productLot: '600001', productLocation: 'Warehouse B', quantity: 300, employeeId: 'E002', customerName: 'Mary Johnson', destination: 'Los Angeles', price: 2400.00 },
    { orderId: '100003', orderDate: '2025-06-03', itemStatus: 'delivered', productName: 'HEXA', productId: '300001', productLot: '700001', productLocation: 'Warehouse C', quantity: 450, employeeId: 'E003', customerName: 'Robert Williams', destination: 'Chicago', price: 3600.00 },
    { orderId: '100004', orderDate: '2025-06-04', itemStatus: 'cancelled', productName: 'DDL', productId: '400001', productLot: '800001', productLocation: 'Warehouse D', quantity: 600, employeeId: 'E004', customerName: 'Patricia Brown', destination: 'Houston', price: 4800.00 },
    { orderId: '100005', orderDate: '2025-06-05', itemStatus: 'pending', productName: 'GDL', productId: '100001', productLot: '500001', productLocation: 'Warehouse A', quantity: 200, employeeId: 'E005', customerName: 'Michael Jones', destination: 'Phoenix', price: 1600.00 },
    { orderId: '100006', orderDate: '2025-06-06', itemStatus: 'shipped', productName: 'OCTA', productId: '200001', productLot: '600001', productLocation: 'Warehouse B', quantity: 350, employeeId: 'E006', customerName: 'Linda Garcia', destination: 'Philadelphia', price: 2800.00 },
    { orderId: '100007', orderDate: '2025-06-07', itemStatus: 'delivered', productName: 'HEXA', productId: '300001', productLot: '700001', productLocation: 'Warehouse C', quantity: 500, employeeId: 'E007', customerName: 'William Martinez', destination: 'San Antonio', price: 4000.00 },
    { orderId: '100008', orderDate: '2025-06-08', itemStatus: 'cancelled', productName: 'DDL', productId: '400001', productLot: '800001', productLocation: 'Warehouse D', quantity: 650, employeeId: 'E008', customerName: 'Barbara Rodriguez', destination: 'San Diego', price: 5200.00 },
    { orderId: '100009', orderDate: '2025-06-09', itemStatus: 'pending', productName: 'GDL', productId: '100001', productLot: '500001', productLocation: 'Warehouse A', quantity: 250, employeeId: 'E009', customerName: 'Richard Wilson', destination: 'Dallas', price: 2000.00 },
    { orderId: '100010', orderDate: '2025-06-10', itemStatus: 'shipped', productName: 'OCTA', productId: '200001', productLot: '600001', productLocation: 'Warehouse B', quantity: 400, employeeId: 'E010', customerName: 'Elizabeth Lee', destination: 'San Jose', price: 3200.00 },

    { orderId: '100011', orderDate: '2025-06-11', itemStatus: 'delivered', productName: 'HEXA', productId: '300001', productLot: '700001', productLocation: 'Warehouse C', quantity: 550, employeeId: 'E011', customerName: 'Charles Harris', destination: 'Austin', price: 4400.00 },
    { orderId: '100012', orderDate: '2025-06-12', itemStatus: 'cancelled', productName: 'DDL', productId: '400001', productLot: '800001', productLocation: 'Warehouse D', quantity: 700, employeeId: 'E012', customerName: 'Susan Clark', destination: 'Jacksonville', price: 5600.00 },
    { orderId: '100013', orderDate: '2025-06-13', itemStatus: 'pending', productName: 'GDL', productId: '100001', productLot: '500001', productLocation: 'Warehouse A', quantity: 300, employeeId: 'E013', customerName: 'Joseph Lewis', destination: 'Fort Worth', price: 2400.00 },
    { orderId: '100014', orderDate: '2025-06-14', itemStatus: 'shipped', productName: 'OCTA', productId: '200001', productLot: '600001', productLocation: 'Warehouse B', quantity: 450, employeeId: 'E014', customerName: 'Jessica Walker', destination: 'Columbus', price: 3600.00 },
    { orderId: '100015', orderDate: '2025-06-15', itemStatus: 'delivered', productName: 'HEXA', productId: '300001', productLot: '700001', productLocation: 'Warehouse C', quantity: 600, employeeId: 'E015', customerName: 'Thomas Hall', destination: 'Charlotte', price: 4800.00 },
    { orderId: '100016', orderDate: '2025-06-16', itemStatus: 'cancelled', productName: 'DDL', productId: '400001', productLot: '800001', productLocation: 'Warehouse D', quantity: 750, employeeId: 'E016', customerName: 'Sarah Allen', destination: 'San Francisco', price: 6000.00 },
    { orderId: '100017', orderDate: '2025-06-17', itemStatus: 'pending', productName: 'GDL', productId: '100001', productLot: '500001', productLocation: 'Warehouse A', quantity: 350, employeeId: 'E017', customerName: 'Christopher Young', destination: 'Indianapolis', price: 2800.00 },
    { orderId: '100018', orderDate: '2025-06-18', itemStatus: 'shipped', productName: 'OCTA', productId: '200001', productLot: '600001', productLocation: 'Warehouse B', quantity: 500, employeeId: 'E018', customerName: 'Karen King', destination: 'Seattle', price: 4000.00 },
    { orderId: '100019', orderDate: '2025-06-19', itemStatus: 'delivered', productName: 'HEXA', productId: '300001', productLot: '700001', productLocation: 'Warehouse C', quantity: 650, employeeId: 'E019', customerName: 'Matthew Wright', destination: 'Denver', price: 5200.00 },
    { orderId: '100020', orderDate: '2025-06-20', itemStatus: 'cancelled', productName: 'DDL', productId: '400001', productLot: '800001', productLocation: 'Warehouse D', quantity: 800, employeeId: 'E020', customerName: 'Nancy Scott', destination: 'Washington', price: 6400.00 },

    { orderId: '100021', orderDate: '2025-06-21', itemStatus: 'pending', productName: 'GDL', productId: '100001', productLot: '500001', productLocation: 'Warehouse A', quantity: 400, employeeId: 'E021', customerName: 'Anthony Green', destination: 'Boston', price: 3200.00 },
    { orderId: '100022', orderDate: '2025-06-22', itemStatus: 'shipped', productName: 'OCTA', productId: '200001', productLot: '600001', productLocation: 'Warehouse B', quantity: 550, employeeId: 'E022', customerName: 'Donna Adams', destination: 'El Paso', price: 4400.00 },
    { orderId: '100023', orderDate: '2025-06-23', itemStatus: 'delivered', productName: 'HEXA', productId: '300001', productLot: '700001', productLocation: 'Warehouse C', quantity: 700, employeeId: 'E023', customerName: 'Mark Baker', destination: 'Detroit', price: 5600.00 },
    { orderId: '100024', orderDate: '2025-06-24', itemStatus: 'cancelled', productName: 'DDL', productId: '400001', productLot: '800001', productLocation: 'Warehouse D', quantity: 850, employeeId: 'E024', customerName: 'Michelle Nelson', destination: 'Nashville', price: 6800.00 },
    { orderId: '100025', orderDate: '2025-06-25', itemStatus: 'pending', productName: 'GDL', productId: '100001', productLot: '500001', productLocation: 'Warehouse A', quantity: 450, employeeId: 'E025', customerName: 'Steven Carter', destination: 'Memphis', price: 3600.00 },
    { orderId: '100026', orderDate: '2025-06-26', itemStatus: 'shipped', productName: 'OCTA', productId: '200001', productLot: '600001', productLocation: 'Warehouse B', quantity: 600, employeeId: 'E026', customerName: 'Elizabeth Mitchell', destination: 'Louisville', price: 4800.00 },
    { orderId: '100027', orderDate: '2025-06-27', itemStatus: 'delivered', productName: 'HEXA', productId: '300001', productLot: '700001', productLocation: 'Warehouse C', quantity: 750, employeeId: 'E027', customerName: 'Paul Perez', destination: 'Baltimore', price: 6000.00 },
    { orderId: '100028', orderDate: '2025-06-28', itemStatus: 'cancelled', productName: 'DDL', productId: '400001', productLot: '800001', productLocation: 'Warehouse D', quantity: 900, employeeId: 'E028', customerName: 'Laura Roberts', destination: 'Milwaukee', price: 7200.00 },
    { orderId: '100029', orderDate: '2025-06-29', itemStatus: 'pending', productName: 'GDL', productId: '100001', productLot: '500001', productLocation: 'Warehouse A', quantity: 500, employeeId: 'E029', customerName: 'Kevin Turner', destination: 'Albuquerque', price: 4000.00 },
    { orderId: '100030', orderDate: '2025-06-30', itemStatus: 'shipped', productName: 'OCTA', productId: '200001', productLot: '600001', productLocation: 'Warehouse B', quantity: 550, employeeId: 'E030', customerName: 'Rebecca Phillips', destination: 'Tucson', price: 4400.00 },

    { orderId: '100031', orderDate: '2025-07-01', itemStatus: 'delivered', productName: 'HEXA', productId: '300001', productLot: '700001', productLocation: 'Warehouse C', quantity: 600, employeeId: 'E031', customerName: 'Matthew Campbell', destination: 'Fresno', price: 4800.00 },
    { orderId: '100032', orderDate: '2025-07-02', itemStatus: 'cancelled', productName: 'DDL', productId: '400001', productLot: '800001', productLocation: 'Warehouse D', quantity: 650, employeeId: 'E032', customerName: 'Rebecca Parker', destination: 'Sacramento', price: 5200.00 },
    { orderId: '100033', orderDate: '2025-07-03', itemStatus: 'pending', productName: 'GDL', productId: '100001', productLot: '500001', productLocation: 'Warehouse A', quantity: 550, employeeId: 'E033', customerName: 'Joshua Evans', destination: 'Kansas City', price: 4400.00 },
    { orderId: '100034', orderDate: '2025-07-04', itemStatus: 'shipped', productName: 'OCTA', productId: '200001', productLot: '600001', productLocation: 'Warehouse B', quantity: 600, employeeId: 'E034', customerName: 'Megan Edwards', destination: 'Atlanta', price: 4800.00 },
    { orderId: '100035', orderDate: '2025-07-05', itemStatus: 'delivered', productName: 'HEXA', productId: '300001', productLot: '700001', productLocation: 'Warehouse C', quantity: 650, employeeId: 'E035', customerName: 'Andrew Collins', destination: 'Omaha', price: 5200.00 },
    { orderId: '100036', orderDate: '2025-07-06', itemStatus: 'cancelled', productName: 'DDL', productId: '400001', productLot: '800001', productLocation: 'Warehouse D', quantity: 700, employeeId: 'E036', customerName: 'Melissa Stewart', destination: 'Raleigh', price: 5600.00 },
    { orderId: '100037', orderDate: '2025-07-07', itemStatus: 'pending', productName: 'GDL', productId: '100001', productLot: '500001', productLocation: 'Warehouse A', quantity: 700, employeeId: 'E037', customerName: 'Brandon Morris', destination: 'Miami', price: 5600.00 },
    { orderId: '100038', orderDate: '2025-07-08', itemStatus: 'shipped', productName: 'OCTA', productId: '200001', productLot: '600001', productLocation: 'Warehouse B', quantity: 750, employeeId: 'E038', customerName: 'Stephanie Rogers', destination: 'Cleveland', price: 6000.00 },
    { orderId: '100039', orderDate: '2025-07-09', itemStatus: 'delivered', productName: 'HEXA', productId: '300001', productLot: '700001', productLocation: 'Warehouse C', quantity: 800, employeeId: 'E039', customerName: 'Justin Reed', destination: 'Tulsa', price: 6400.00 },
    { orderId: '100040', orderDate: '2025-07-10', itemStatus: 'cancelled', productName: 'DDL', productId: '400001', productLot: '800001', productLocation: 'Warehouse D', quantity: 850, employeeId: 'E040', customerName: 'Rebecca Cook', destination: 'Wichita', price: 6800.00 },

    { orderId: '100041', orderDate: '2025-07-11', itemStatus: 'pending', productName: 'GDL', productId: '100001', productLot: '500001', productLocation: 'Warehouse A', quantity: 750, employeeId: 'E041', customerName: 'Eric Morgan', destination: 'New Orleans', price: 6000.00 },
    { orderId: '100042', orderDate: '2025-07-12', itemStatus: 'shipped', productName: 'OCTA', productId: '200001', productLot: '600001', productLocation: 'Warehouse B', quantity: 800, employeeId: 'E042', customerName: 'Angela Bell', destination: 'Arlington', price: 6400.00 },
    { orderId: '100043', orderDate: '2025-07-13', itemStatus: 'delivered', productName: 'HEXA', productId: '300001', productLot: '700001', productLocation: 'Warehouse C', quantity: 850, employeeId: 'E043', customerName: 'Shawn Murphy', destination: 'Bakersfield', price: 6800.00 },
    { orderId: '100044', orderDate: '2025-07-14', itemStatus: 'cancelled', productName: 'DDL', productId: '400001', productLot: '800001', productLocation: 'Warehouse D', quantity: 900, employeeId: 'E044', customerName: 'Deborah Rivera', destination: 'Tampa', price: 7200.00 },
    { orderId: '100045', orderDate: '2025-07-15', itemStatus: 'pending', productName: 'GDL', productId: '100001', productLot: '500001', productLocation: 'Warehouse A', quantity: 800, employeeId: 'E045', customerName: 'Gloria Cooper', destination: 'Aurora', price: 6400.00 },
    { orderId: '100046', orderDate: '2025-07-16', itemStatus: 'shipped', productName: 'OCTA', productId: '200001', productLot: '600001', productLocation: 'Warehouse B', quantity: 850, employeeId: 'E046', customerName: 'Raymond Richardson', destination: 'Anaheim', price: 6800.00 },
    { orderId: '100047', orderDate: '2025-07-17', itemStatus: 'delivered', productName: 'HEXA', productId: '300001', productLot: '700001', productLocation: 'Warehouse C', quantity: 900, employeeId: 'E047', customerName: 'Teresa Cox', destination: 'Santa Ana', price: 7200.00 },
    { orderId: '100048', orderDate: '2025-07-18', itemStatus: 'cancelled', productName: 'DDL', productId: '400001', productLot: '800001', productLocation: 'Warehouse D', quantity: 950, employeeId: 'E048', customerName: 'Peter Howard', destination: 'Riverside', price: 7600.00 },
    { orderId: '100049', orderDate: '2025-07-19', itemStatus: 'pending', productName: 'GDL', productId: '100001', productLot: '500001', productLocation: 'Warehouse A', quantity: 900, employeeId: 'E049', customerName: 'Kelly Ward', destination: 'Corpus Christi', price: 7200.00 },
    { orderId: '100050', orderDate: '2025-07-20', itemStatus: 'shipped', productName: 'OCTA', productId: '200001', productLot: '600001', productLocation: 'Warehouse B', quantity: 950, employeeId: 'E050', customerName: 'Rachel Torres', destination: 'Lexington', price: 7600.00 }
  ];

  // Load orders from localStorage or initialize with sampleOrders if empty
  let orders = JSON.parse(localStorage.getItem(currentUser + '_orders') || '[]');
  if (orders.length === 0) {
    orders = sampleOrders;
    localStorage.setItem(currentUser + '_orders', JSON.stringify(orders));
  }

  function saveOrders() {
    localStorage.setItem(currentUser + '_orders', JSON.stringify(orders));
  }

  function clearInputs() {
    inputs.forEach(id => {
      const el = document.getElementById(id);
      if (el) {
        el.value = '';
        localStorage.removeItem(currentUser + '_order_' + id);
      }
    });
  }

  function renderOrders(filter = '') {
    orderList.innerHTML = '';
    const filtered = orders.filter(o =>
      Object.values(o).join(' ').toLowerCase().includes(filter.toLowerCase())
    );
    if (!filtered.length) {
      orderList.innerHTML = '<p>No orders found.</p>';
      return;
    }

    filtered.forEach((o, i) => {
      const div = document.createElement('div');
      div.className = 'order-entry';
      div.innerHTML = `
        <div><strong>#${o.orderId}</strong> – ${o.orderDate} – ${o.itemStatus}</div>
        <div>
          <span class="inline">Customer: ${o.customerName}</span>
          <span class="inline">Item ID: ${o.productId}</span>
          <span class="inline">Qty: ${o.quantity} kg</span>
        </div>
        <div>Invoice: $${o.price.toFixed(2)}</div>
        <div class="order-buttons">
          <button onclick="deleteOrder(${i})">Delete</button>
        </div>`;
      orderList.appendChild(div);
    });
  }

  form.addEventListener('submit', e => {
    e.preventDefault();
    const newOrder = {};
    let valid = true;

    inputs.forEach(id => {
      const el = document.getElementById(id);
      const val = el.value.trim();
      if ((id === 'orderId' || id === 'orderDate' || id === 'itemStatus' || id === 'productName' || id === 'productLocation' || id === 'quantity' || id === 'employeeId' || id === 'customerName' || id === 'destination' || id === 'price') && !val) {
        valid = false;
      }
      newOrder[id] = val;
    });

    if (!valid) {
      alert('Please fill in all required fields.');
      return;
    }

    // Ensure unique orderId
    if (orders.some(o => o.orderId === newOrder.orderId)) {
      alert('Order ID already exists.');
      return;
    }

    newOrder.quantity = Number(newOrder.quantity);
    newOrder.price = Number(newOrder.price);

    orders.push(newOrder);
    saveOrders();
    renderOrders();
    clearInputs();
  });

  searchInput.addEventListener('input', e => renderOrders(e.target.value));

  function deleteOrder(i) {
    if (confirm('Delete this order?')) {
      orders.splice(i, 1);
      saveOrders();
      renderOrders(searchInput.value);
    }
  }

  function logout() {
    localStorage.removeItem('currentUser');
    window.location.href = 'login.html';
  }

  renderOrders();
</script>

</body>
</html>
