<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Product</title>
  <style>
    table { border-collapse: collapse; width: 100%; }
    th, td { border: 1px solid #999; padding: 8px; }
  </style>
  <script>
    function loadProducts() {
      const table = document.getElementById("product_table");
      const data = JSON.parse(localStorage.getItem("products") || "[]");
      table.innerHTML = `<tr><th>ID</th><th>Price</th><th>Weight</th><th>Unit</th><th>Location</th><th>Quantity</th><th>Actions</th></tr>`;
      data.forEach((p, i) => {
        const row = table.insertRow();
        row.innerHTML = `<td>${p.id}</td><td>${p.price}</td><td>${p.weight}</td><td>${p.unit}</td><td>${p.location}</td><td>${p.quantity}</td>
        <td><button onclick="deleteProduct(${i})">Delete</button></td>`;
      });
    }

    function addProduct() {
      const p = {
        id: document.getElementById("id").value,
        price: document.getElementById("price").value,
        weight: document.getElementById("weight").value,
        unit: document.getElementById("unit").value,
        location: document.getElementById("location").value,
        quantity: document.getElementById("quantity").value
      };
      const products = JSON.parse(localStorage.getItem("products") || "[]");
      products.push(p);
      localStorage.setItem("products", JSON.stringify(products));
      loadProducts();
    }

    function deleteProduct(index) {
      const products = JSON.parse(localStorage.getItem("products") || "[]");
      products.splice(index, 1);
      localStorage.setItem("products", JSON.stringify(products));
      loadProducts();
    }

    function searchProduct() {
      const q = document.getElementById("search_query").value.toLowerCase();
      const rows = document.querySelectorAll("#product_table tr:not(:first-child)");
      rows.forEach(row => {
        const match = [...row.cells].some(td => td.textContent.toLowerCase().includes(q));
        row.style.display = match ? "" : "none";
      });
    }

    window.onload = loadProducts;
  </script>
</head>
<body>
  <nav>
    <a href="dashboard.html">Dashboard</a> |
    <a href="customers.html">Customers</a> |
    <a href="employee.html">Employee</a> |
    <a href="product.html">Product</a> |
    <a href="orders.html">Orders</a>
  </nav>

  <h1>Product</h1>
  <form onsubmit="event.preventDefault(); addProduct();">
    <label>ID: <input type="text" id="id" required></label><br>
    <label>Price: <input type="text" id="price" required></label><br>
    <label>Weight: <input type="text" id="weight" required></label><br>
    <label>Unit (kg/lb): <input type="text" id="unit" required></label><br>
    <label>Location: <input type="text" id="location" required></label><br>
    <label>Quantity: <input type="number" id="quantity" required></label><br>
    <button type="submit">Submit</button><br><br>
    <label>Search All Records: <input type="text" id="search_query" oninput="searchProduct()" placeholder="Search..."></label>
  </form>

  <h2>Saved Products</h2>
  <table id="product_table"></table>
</body>
</html>
